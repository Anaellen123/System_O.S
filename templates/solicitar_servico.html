{% extends "head.html" %}
{% load static %}

{% block header %}
{% endblock %}

{% block content %}


<main class="solicitar-page">
  <header class="top-header">
    <div class="container header-row">
      <div class="brand">
        <img src="{% static 'img/test2.png' %}" alt="Logo" class="brand-logo">
        
      </div>

      <nav class="top-nav">
        <a href="{% url 'index' %}">In√≠cio</a>
        <a class="active" href="{% url 'solicitar_servico' %}">Solicitar servi√ßo</a>
        <a href="{% url 'login_admin' %}">login</a>
      </nav>
    </div>
  </header>

  <!-- T√≠tulo grande -->
  <section class="page-title container">
    <h1>Solicitar servi√ßo</h1>
  </section>

  <!-- Grid principal -->
  <section class="container layout-grid">

    <!-- Sidebar -->
    <aside class="sidebar">

      <div class="card steps-card">
        <div class="card-title">Etapas</div>

        <ul class="steps" id="stepsList">
          <li class="step active" data-step="1">
            <span class="step-num">1</span>
            <span class="step-text">Dados do Solicitante</span>
          </li>
          <li class="step" data-step="2">
            <span class="step-num">2</span>
            <span class="step-text">Localiza√ß√£o e Servi√ßo</span>
          </li>
          <li class="step" data-step="3">
            <span class="step-num">3</span>
            <span class="step-text">Anexos</span>
          </li>
          <li class="step" data-step="4">
            <span class="step-num">4</span>
            <span class="step-text">Revisar e Enviar</span>
          </li>
        </ul>
      </div>

      <div class="card tips-card">
        <div class="card-title">Dicas para agilizar</div>
        <ul class="tips">
          <li>Separe documentos (ex: CPF e e-mail)</li>
          <li>Tenha uma c√≥pia dos anexos pronta</li>
          <li>Anexe formul√°rios no formato imagens</li>
        </ul>
        <div class="tip-icon" aria-hidden="true">üìù</div>
      </div>

    </aside>

    <!-- Card do formul√°rio -->
    <section class="form-wrap">

      <div class="form-card">
        <!-- Topbar do card -->
        <div class="form-top">
          <div>
            <div class="form-top-title">Solicitar servi√ßo</div>
            <div class="form-top-sub">
              <span id="stepLabel">Etapa 1 de 4</span>
            </div>
          </div>

          <button class="close-btn" type="button" aria-label="Fechar">‚úï</button>
        </div>

        <!-- Progress -->
        <div class="progress-row">
          <div class="progress-track">
            <div class="progress-bar" id="progressBar" style="width: 25%;"></div>
          </div>
          <div class="progress-pct" id="progressPct">25%</div>
        </div>

        <!-- Conte√∫do -->
        <form
          id="solicitarForm"
          class="form-body"
          method="post"
          enctype="multipart/form-data"
          action=""
          novalidate
        >
          {% csrf_token %}

          <!-- STEP 1 -->
          <div class="step-content active" data-content="1">
            <h2>Dados do Solicitante</h2>
            <p class="muted">Preencha os dados de quem est√° solicitando o servi√ßo</p>

            <div class="field">
              <label>Tipo de Pessoa <span class="req">*</span></label>
              <div class="segmented" role="group" aria-label="Tipo de Pessoa">
                <label class="seg-item">
                  <input type="radio" name="person_type" value="PF" checked>
                  <span>‚úÖ Pessoa F√≠sica</span>
                </label>
                <label class="seg-item">
                  <input type="radio" name="person_type" value="PJ">
                  <span>‚óªÔ∏è Pessoa Jur√≠dica</span>
                </label>
              </div>
            </div>

            <div class="field">
              <label for="cpf">CPF/CNPJ <span class="req">*</span></label>
              <input
                id="cpf"
                name="document"
                type="text"
                placeholder="000.000.000-00 (PF) ou 00.000.000/0001-00 (PJ)"
                required
              >
            </div>

            <div class="field">
              <label for="nome">Nome do Solicitante <span class="req">*</span></label>
              <input
                id="nome"
                name="full_name"
                type="text"
                placeholder="Seu nome completo"
                required
              >
            </div>

            <div class="field">
              <label for="tel">Telefone para Contato <span class="req">*</span></label>
              <input
                id="tel"
                name="phone"
                type="text"
                placeholder="(00) 00000-0000 (com DDD da cidade)"
                required
              >
              <small class="help">Use o DDD da sua cidade</small>
            </div>
          </div>

          <!-- STEP 2 -->
          <div class="step-content" data-content="2">
            <h2>Localiza√ß√£o e Servi√ßo</h2>
            <p class="muted">Informe onde ocorreu e qual o servi√ßo desejado</p>

            <div class="grid-2">
              <div class="field">
                <label for="cep">CEP</label>
                <input id="cep" name="cep" type="text" placeholder="00000-000">
              </div>
              <div class="field">
                <label for="numero">N√∫mero</label>
                <input id="numero" name="number" type="text" placeholder="Ex: 123">
              </div>
            </div>

            <div class="field">
              <label for="rua">Rua</label>
              <input id="rua" name="street" type="text" placeholder="Nome da rua">
            </div>

            <div class="grid-2">
              <div class="field">
                <label for="bairro">Bairro</label>
                <input id="bairro" name="neighborhood" type="text" placeholder="Bairro">
              </div>
              <div class="field">
                <label for="cidade">Cidade</label>
                <input id="cidade" name="city" type="text" placeholder="Cidade">
              </div>
            </div>

            <div class="field">
              <label for="servico">Tipo de servi√ßo <span class="req">*</span></label>
              <select id="servico" name="service_type" required>
                <option value="">Selecione...</option>
                <option value="Coleta de entulho">Coleta de entulho</option>
                <option value="Reparo de ilumina√ß√£o">Reparo de ilumina√ß√£o</option>
                <option value="Limpeza urbana">Limpeza urbana</option>
                <option value="Ro√ßagem e capina√ß√£o">Ro√ßagem e capina√ß√£o</option>
                <option value="Poda de √°rvore">Poda de √°rvore</option>
                <option value="Sinaliza√ß√£o">Sinaliza√ß√£o</option>
              </select>
            </div>

            <div class="field">
              <label for="descricao">Descri√ß√£o <span class="req">*</span></label>
              <textarea
                id="descricao"
                name="description"
                rows="4"
                placeholder="Descreva o problema (ponto de refer√™ncia, detalhes, etc.)"
                required
              ></textarea>
            </div>
          </div>

          <!-- STEP 3 -->
          <div class="step-content" data-content="3">
            <h2>Anexos</h2>
            <p class="muted">Envie imagens ou documentos que ajudem na an√°lise</p>

            <div class="upload">
              <input id="anexos" name="attachments" type="file" multiple>
              <label for="anexos" class="upload-box">
                <div class="upload-title">Clique para selecionar arquivos</div>
                <div class="upload-sub">PNG, JPG ou PDF</div>
              </label>
            </div>

            <div class="field">
              <label for="obs">Observa√ß√µes</label>
              <textarea
                id="obs"
                name="notes"
                rows="4"
                placeholder="Observa√ß√µes adicionais (opcional)"
              ></textarea>
            </div>
          </div>

          <!-- STEP 4 -->
          <div class="step-content" data-content="4">
            <h2>Revisar e Enviar</h2>
            <p class="muted">Confira os dados antes de enviar</p>

            <div class="review" id="reviewBox">
              <div class="review-row"><b>Nome:</b> <span data-r="full_name">‚Äî</span></div>
              <div class="review-row"><b>CPF/CNPJ:</b> <span data-r="document">‚Äî</span></div>
              <div class="review-row"><b>Telefone:</b> <span data-r="phone">‚Äî</span></div>
              <hr>
              <div class="review-row"><b>Servi√ßo:</b> <span data-r="service_type">‚Äî</span></div>
              <div class="review-row"><b>Endere√ßo:</b> <span data-r="address">‚Äî</span></div>
              <div class="review-row"><b>Descri√ß√£o:</b> <span data-r="description">‚Äî</span></div>
              <div class="review-row"><b>Observa√ß√µes:</b> <span data-r="notes">‚Äî</span></div>
            </div>

            <div class="notice">
              Ao enviar, voc√™ confirma que as informa√ß√µes s√£o verdadeiras.
            </div>
          </div>

          <!-- A√ß√µes -->
          <div class="form-actions">
            <button class="btn btn-ghost" type="button" id="btnPrev" disabled>‚Äπ Anterior</button>
            <button class="btn btn-primary" type="button" id="btnNext">Pr√≥ximo ‚Ä∫</button>
          </div>

        </form>
      </div>

    </section>
  </section>

  <!-- Cards inferiores -->
  <section class="container bottom-cards">
    <article class="info-card">
      <div class="info-head">
        <span class="info-ico">üßπ</span>
        <h3>Servi√ßos Urbanos</h3>
      </div>
      <p>Solicite coleta de entulho, reparo em ilumina√ß√£o p√∫blica, limpeza urbana e capina√ß√£o.</p>
    </article>

    <article class="info-card">
      <div class="info-head">
        <span class="info-ico">üìé</span>
        <h3>Anexamentos</h3>
      </div>
      <p>Envie fotos e documentos para agilizar a an√°lise e execu√ß√£o da solicita√ß√£o.</p>
    </article>

    <article class="info-card">
      <div class="info-head">
        <span class="info-ico">üèõÔ∏è</span>
        <h3>Prefeitura</h3>
      </div>
      <p>Portal oficial para solicita√ß√µes de servi√ßos urbanos de Socorro-SE.</p>
    </article>
  </section>

  <footer class="container footer">
    ¬© 2024 Prefeitura de Nossa Senhora do Socorro - SE<br>
    <span class="muted">Todos os direitos reservados.</span>
  </footer>

</main>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/solicitar_servico.js' %}"></script>
{% endblock %}
